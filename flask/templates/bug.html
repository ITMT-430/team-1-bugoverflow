<!DOCTYPE html> {% import 'macros_file.html' as macro %}
<html lang="en">

<head>
    {{ macro.standard_header("Bug Overflow") }}
</head>

<body>
    <!-- Navigation -->
    {{ macro.navbar(index, tags, about) }}

    <!-- Page Container -->
    <div class="container">
        <!-- Header -->
        {{ macro.header_image() }}

        <!-- Content -->
        <div class="content">

            <div class="main">
                <div class="question">
                    <table>
                        <tbody>
                            <tr>
                                <td class="postcell">
                                    <div>
                                        <div class="post-image">
                                            <img src="{{url_for('static', filename=bug_image)}}" alt="">
                                            {% if thread.image.geoloc %}
                                            <img src="https://maps.googleapis.com/maps/api/staticmap?center={{ thread.image.geoloc }}&zoom=8&size=512x512&key=AIzaSyBB3o_tLwpc9tvBuoFF0S-bdv934mrmhv4">
                                            {% endif %}
                                        </div>
                                        <br>
                                        <div class="post-taglist">
                                            Tags: {% for tag in thread.image.tags %}
                                            <a href="{{url_for('tags', path=tag)}}">
                                                <mark>{{ tag.name }}</mark>
                                            </a>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </td>
                                <td class="descriptioncell">
                                    <div class="question-header">
                                        <h1> {{ thread.title }} <br><small>by {{ user }}</small></h1>
                                        
                                    </div>
                                    <br>
                                    <div class="post-desc">
                                        <h3> Description: </h3>
                                        <p> {{ thread.body }} </p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>
                <div class="discussion">
                    <div id="discussion-header">
                        <h2>Discussion</h2>
                        <hr>
                    </div>



            <!-- Comments Section -->
                    <div class="col-md-6" id="comments-container">
                        <div id="comments-form">
                        {% if not session.logged_in %}
                            <div class="form-group">
                                <label for="comment">Comment:</label>
                                <textarea class="form-control" rows="5" id="comment" action="" method="post" disabled></textarea>
                                <button type="submit" class="btn btn-primary" id="submit-comment" disabled>submit</button>
                            </div>
                            <div class="alert alert-danger" role="alert">
                                You must have an <a href="{{url_for( 'signup')}}" class="alert-link">account</a> to comment.
                            </div>
                        {% else %} 
                            <div class="form-group">
                                <label for="comment">Comment:</label>
                                <textarea class="form-control" rows="5" id="comment" action="" method="post"></textarea>
                                <button type="submit" class="btn btn-primary" id="submit-comment">submit</button>
                            </div>   
                        {% endif %}
                            <div id="comments">
                            {% for c in thread.comments%}
                                <ul class="media-list">
                                    <li class="media">
                                        <a class="pull-left" href="#">
                                            <img class="media-object" src="http://placehold.it/64x64" alt="Generic placeholder image">
                                        </a>
                                        <div class="media-body">
                                            <h4 class="media-heading">{{c.user.username}}</h4> 
                                            {{c.body}}
                                            <p><a href="#">Reply</a></p>
                                            {% for c2 in c.children recursive%}
                                            <div class="media">
                                                <a class="pull-left" href="#">
                                                    <img class="media-object" src="http://placehold.it/64x64" alt="Generic placeholder image">
                                                </a>
                                                <div class="media-body">
                                                    <h4 class="media-heading">{{c2.user.username}}</h4>
                                                    {{c2.body}}  LOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUMLOREM IPSUM
                                                    <p><a href="#">Reply</a></p>
                                                    {{ loop(c2.children) }}
                                
                                                </div>
                                            </div>
                                            {% endfor %}
                                        </div>
                                        </li>
                                    </ul>
                                    {% endfor %}
                                </div>

                                            <!-- Nested comment -->
                                            <div class="media">
                                                <a class="pull-left" href="#">
                                                    <img class="media-object" src="http://placehold.it/64x64" alt="Generic placeholder image">
                                                </a>
                                                <div class="media-body">
                                                    <h4 class="media-headig">User 2</h4> This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text.

                                                    <p><a href="#">Reply</a></p>

                                                    <!-- Nested comment -->
                                                    <div class="media">
                                                        <a class="pull-left" href="#">
                                                            <img class="media-object" src="http://placehold.it/64x64" alt="Generic placeholder image">
                                                        </a>
                                                        <div class="media-body">
                                                            <h4 class="media-heading">User 1</h4> This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text.

                                                            <p><a href="#">Reply</a></p>

                                                        </div>

                                                    </div>
                                                </div>

                                            </div>

                                            <!-- Nested comment -->
                                            <div class="media">
                                                <a class="pull-left" href="#">
                                                    <img class="media-object" src="http://placehold.it/64x64" alt="Generic placeholder image">
                                                </a>
                                                <div class="media-body">
                                                    <h4 class="media-heading">User 3</h4> This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text. This is some sample text.

                                                    <p><a href="#">Reply</a></p>

                                                </div>

                                            </div>
                                        </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">

                        </div>
                    </div>
                    <hr>
                </div>
            </div>
        </div>

    <br>


    <!-- Footer -->
    {{ macro.standard_footer() }}
</body>

</html>
